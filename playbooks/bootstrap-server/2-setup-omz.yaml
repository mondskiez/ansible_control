---

    - name: "editing /etc/systemd/resolved.conf"
      lineinfile:
        path: /etc/systemd/resolved.conf
        regexp: "{{ item.regexp }}"
        line: "{{ item.line }}"
      loop:
        - regexp: '^#DNS='
          line: 'DNS=1.1.1.1'
        - regexp: '^#DNSStubListener=yes'
          line: 'DNSStubListener=no'
    
    - name: "force removal of symbolic link of resolv.conf"
      command: sudo ln -sf /run/systemd/resolve/resolv.conf /etc/resolv.conf

    - name: change morty default shell to ZSH
      command: usermod -s /usr/bin/zsh morty

    - name: "OMZ establish home directory."
      set_fact:
        omz_user_home_dir: "/home/morty"
    
    - name: "OMZ establish install location."
      set_fact:
        omz_install_path: "/home/morty/.oh-my-zsh"
    
    - name: "OMZ clone Robby Russell OhMyZSH git repo for morty."
      git:
        repo: "https://github.com/robbyrussell/oh-my-zsh.git"
        dest: "/home/morty/.oh-my-zsh"
        update: "true"
        accept_hostkey: "true"
        version: "master"
    
    - name: "OMZ clone ZSH Auto Suggestions git repo"
      git:
        repo: "https://github.com/zsh-users/zsh-autosuggestions"
        dest: "/home/morty/.oh-my-zsh/custom/plugins/zsh-autosuggestions"
        update: "true"
        accept_hostkey: "true"
        version: "master"
    
    - name: "OMZ | set ownership on newly cloned repository."
      file:
        path: "/home/morty/.oh-my-zsh"
        owner: morty
        group: morty
        recurse: "true"
    
    - name: create .hushlogin file to disable MOTD
      command: touch ~/.hushlogin

    - name: "Creating a .zshrc file"
      copy:
        dest: /home/morty/.zshrc
        content: |
          ZSH_THEME="xiong-chiamiov-plus"
          plugins=(git sudo colored-man-pages zsh-autosuggestions)
          source /home/morty/.oh-my-zsh/oh-my-zsh.sh
          source /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
          export PATH="/home/morty/.local/bin:$PATH"%
          alias tq="clear && /usr/bin/bash /home/morty/tq.sh"
          alias tp="clear && /usr/bin/bash /home/morty/tp.sh"
          alias update="clear && sudo apt-get update -y && sudo apt-get upgrade -y && sudo apt-get dist-upgrade -y && sudo apt autoclean -y && sudo apt autoremove -y"
          alias f2bss="sudo docker exec -it fail2ban fail2ban-client status sshd"
          alias f2br="sudo docker exec -it fail2ban fail2ban-client restart"
        owner: "morty"
        group: "morty"
    
    - name: Run source to .zshrc to effect changes
      shell: "/usr/bin/zsh /home/morty/.zshrc"